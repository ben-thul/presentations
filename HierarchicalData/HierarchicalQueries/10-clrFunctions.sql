use [HierarchyDB];
go

PRINT N'Creating [clr]...';


GO
CREATE SCHEMA [clr]
    AUTHORIZATION [dbo];


GO
PRINT N'Creating [HierarchyCLR]...';


GO
CREATE ASSEMBLY [HierarchyCLR]
    AUTHORIZATION [dbo]
    FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C010300443E78570000000000000000E00002210B010B00001000000006000000000000BE2E00000020000000400000000000100020000000020000040000000000000006000000000000000080000000020000000000000300608500001000001000000000100000100000000000001000000000000000000000006C2E00004F00000000400000B802000000000000000000000000000000000000006000000C000000342D00001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000C40E0000002000000010000000020000000000000000000000000000200000602E72737263000000B8020000004000000004000000120000000000000000000000000000400000402E72656C6F6300000C0000000060000000020000001600000000000000000000000000004000004200000000000000000000000000000000A02E00000000000048000000020005003C220000F80A00000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000133002004600000001000011280E00000A027B03000004330F027B020000041FFEFE0116FE012B0117000C082D0B02167D02000004020A2B0716730C0000060A06027B050000047D04000004060B2B00072A0000133001000B000000020000110228050000060A2B00062A00133003007700000003000011027B020000040B07450200000004000000020000002B042B2B2B022B5402157D02000004002B370002027B040000048C030000017D0100000402177D02000004170A2B3102157D0200000402027C0400000417280F00000A7D0400000400027C04000004281000000A16FE010C082DB700160A2B00062A00133001000B00000004000011027B010000040A2B00062A1A731100000A7A0A002A000000133001000B00000004000011027B010000040A2B00062A6602281200000A02037D0200000402280E00000A7D030000042A0000001330020015000000050000111FFE730C0000060A06027D05000004060B2B00072A3A000302A50300000181030000012A133003005F0000000600001100160A2B0A0F0017280F00000A10000F0102281300000A281400000A281500000A0C082DE00616FE01281600000A25281700000A2D1002281800000A281900000A281A00000A281500000A16FE010C082D07281B00000A1000020B2B00072A1E02281200000A2A0042534A4201000100000000000C00000076342E302E33303331390000000005006C000000B8030000237E0000240400004005000023537472696E6773000000006409000008000000235553006C0900001000000023475549440000007C0900007C01000023426C6F6200000000000000020000015717A20B0902000000FA253300160000010000001300000003000000050000000C00000006000000050000001C0000000C00000006000000010000000200000002000000070000000200000001000000040000000100000000000A0001000000000006004000390006005A0047000A00800066000600F600D70006001C01090117003001000006005F013F0106007F013F010E00D101B60106001502FA0106002302FA0106003102470006003D0239000600310409010600490439000600870439001200B2049D040E00B2049D04060022053F010000000001000000000001000100010010001B00000005000100010003011000E60100000500010005000100D102B60001007A03C20001008503C2000600C800C5000600C503C50098210000000096008F0013000100B9210000000096009D001A000200C821000000009600B300220004003322000000008618C2002B000600502000000000E10149029C000600A42000000000E1019B02AD000600BC2000000000E101C802B2000600402100000000E109DE02B9000600572100000000E1012C032B0006005E2100000000E10157032B000600642100000000E1099A03B90006007B21000000008618C2003500060000000100C80000000100CA0002000200CE00000001000301000002000601000001007A03030006000300090003000A0003003100030035002100C2002B002900C2002F003900C20035004100C2002B004900C2002B000C008D02A40011008D02AD006100C802B20014002003BD00610051032B00690072032B0061002003B9007100C2002B0079005504D20019007004E60019007C04B2008100C2002B000900C2002B001900BD0412019100CC0419019100DA0420019100E20426019100EE0420011900F7042C011900FF04310191000B053A01190019052C019900C2002B0020002B003A002E001B0053012E0013004A012E0023005C0160002B00CD006300E300CD00A0006B00CD00C0006B00CD0000016B00CD0020016B00CD0060016B00CD0080016B00CD00D600E100EC00F200F6004301030001000000CC03C90000000A04C90002000800030002000B00050003000A000D0003000C000F0003000E001100030010001300030012001500030014001700030016001900900096000480000000000000000000000000000000009D01000004000000000000000000000001003000000000000A00000000000000000000000A006600000000000400000000000000000000000100AA01000000000200000000000000000000000100AA010000FD000300020000000000003C4D6F64756C653E00486965726172636879434C522E646C6C0055736572446566696E656446756E6374696F6E73006D73636F726C69620053797374656D004F626A6563740053797374656D2E436F6C6C656374696F6E730049456E756D657261626C65004D6963726F736F66742E53716C5365727665722E54797065730053716C4869657261726368794964004C697374416E636573746F72730046696C6C526F775F4C697374416E636573746F727300436F6D6D6F6E416E636573746F72002E63746F720068006F626A00616E636573746F720053797374656D2E52756E74696D652E496E7465726F705365727669636573004F75744174747269627574650068310068320053797374656D2E446961676E6F73746963730044656275676761626C6541747472696275746500446562756767696E674D6F6465730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C69747941747472696275746500486965726172636879434C520053797374656D2E44617461004D6963726F736F66742E53716C5365727665722E5365727665720053716C46756E6374696F6E417474726962757465003C4C697374416E636573746F72733E645F5F300053797374656D2E436F6C6C656374696F6E732E47656E657269630049456E756D657261626C6560310049456E756D657261746F7260310049456E756D657261746F720049446973706F7361626C650053797374656D2E436F6C6C656374696F6E732E47656E657269632E49456E756D657261626C653C53797374656D2E4F626A6563743E2E476574456E756D657261746F7200476574456E756D657261746F720053797374656D2E436F6C6C656374696F6E732E49456E756D657261626C652E476574456E756D657261746F72004D6F76654E657874003C3E325F5F63757272656E740053797374656D2E436F6C6C656374696F6E732E47656E657269632E49456E756D657261746F723C53797374656D2E4F626A6563743E2E6765745F43757272656E74006765745F43757272656E740053797374656D2E436F6C6C656374696F6E732E49456E756D657261746F722E52657365740052657365740053797374656D2E49446973706F7361626C652E446973706F736500446973706F7365003C3E315F5F7374617465003C3E6C5F5F696E697469616C54687265616449640053797374656D2E436F6C6C656374696F6E732E49456E756D657261746F722E6765745F43757272656E74003C3E335F5F680053797374656D2E436F6C6C656374696F6E732E47656E657269632E49456E756D657261746F723C53797374656D2E4F626A6563743E2E43757272656E740053797374656D2E436F6C6C656374696F6E732E49456E756D657261746F722E43757272656E7400446562756767657248696464656E41747472696275746500456E7669726F6E6D656E74006765745F43757272656E744D616E61676564546872656164496400476574416E636573746F72006765745F49734E756C6C004E6F74537570706F72746564457863657074696F6E0053797374656D2E446174612E53716C54797065730053716C426F6F6C65616E00497344657363656E64616E744F66006F705F4C6F676963616C4E6F74006F705F54727565006F705F496D706C69636974006F705F46616C736500476574526F6F74006F705F457175616C697479006F705F42697477697365416E64006765745F4E756C6C00436F6D70696C657247656E657261746564417474726962757465000000000003200000000000B805D1BD44D4E64A98E31652582286050008B77A5C561934E0890889845DCD8080CC910600011209110D070002011C10110D080002110D110D110D0320000105200101111904200101085501000200540E1146696C6C526F774D6574686F644E616D651546696C6C526F775F4C697374416E636573746F7273540E0F5461626C65446566696E6974696F6E14616E636573746F7220686965726172636879696405151229011C0515122D011C07200015122D011C08200015122D01130004200012310320000202061C0320001C04200013000206080306110D0328001C0401000000030000080A0703120C15122D011C020407011231052001110D080507030208020307011C060702120C1209148D220147E1994F5078D3C0FFA221047169BAF3720620011145110D06000111491149050001021149050001114902040000110D0800021145110D110D08000211491149114906070302110D020801000701000000000801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F7773010000000000443E785700000000020000001C010000502D0000500F00005253445307365C78E37EB64184B90887864B7BC40B000000633A5C55736572735C62656E2E7468756C5C446F63756D656E74735C56697375616C2053747564696F20323031355C50726F6A656374735C486965726172636879434C525C486965726172636879434C525C6F626A5C44656275675C486965726172636879434C522E7064620000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000942E00000000000000000000AE2E0000002000000000000000000000000000000000000000000000A02E0000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF250020001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001001000000018000080000000000000000000000000000001000100000030000080000000000000000000000000000001000000000048000000584000005C02000000000000000000005C0234000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000000000000000000000000000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B004BC010000010053007400720069006E006700460069006C00650049006E0066006F0000009801000001003000300030003000300034006200300000002C0002000100460069006C0065004400650073006300720069007000740069006F006E000000000020000000300008000100460069006C006500560065007200730069006F006E000000000030002E0030002E0030002E003000000044001100010049006E007400650072006E0061006C004E0061006D006500000048006900650072006100720063006800790043004C0052002E0064006C006C00000000002800020001004C006500670061006C0043006F0070007900720069006700680074000000200000004C00110001004F0072006900670069006E0061006C00460069006C0065006E0061006D006500000048006900650072006100720063006800790043004C0052002E0064006C006C0000000000340008000100500072006F006400750063007400560065007200730069006F006E00000030002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000030002E0030002E0030002E00300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000C000000C03E00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000;


GO
ALTER ASSEMBLY [HierarchyCLR]
    DROP FILE ALL
    ADD FILE FROM 0x4D6963726F736F667420432F432B2B204D534620372E30300D0A1A445300000000020000020000001B000000B0000000000000001A00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020F93FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1802C0F8FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0BCA3101380000000010000000100000000000000E00FFFF04000000FFFF03000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BCA3101380000000010000000100000000000000F00FFFF04000000FFFF0300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F862513FC607D311905300C04FA302A1C4454B99E9E6D211903F00C04FA302A10B9D865A1166D311BD2A0000F80849BD60A66E40CF64824CB6F042D48172A799100000000000000002C08CF50EBA9A08B7C42EDB35F5755DFFFFFFFFFFFFFFFF280000001900000003000000060000001400000015000000070000000A00000009000000040000000C0000000D0000000E0000000F0000001000000011000000130000001200000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BCA310138000000001000000010000000000000FFFFFFFF04000000FFFF030000000000FFFFFFFF00000000FFFFFFFF00000000FFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BCA310138000000001000000010000000000000FFFFFFFF04000000FFFF030000000000FFFFFFFF00000000FFFFFFFF00000000FFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FB00000000000000FB0000000000000000000000000000000000000000000000C4020000B40200008C0200002C0000001C010000FFFFFFFF280000001900000003000000060000001400000015000000070000000A00000009000000040000000C0000000D0000000E0000000F00000010000000110000001300000012000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001BE2300180000000AC45ECF0AFD4D1010A0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000200000001000000020000000000000067000000280000001BE230017C29B8DB58000000010000006600000067000000650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FEEFFEEF01000000CC00000000633A5C55736572735C62656E2E7468756C5C446F63756D656E74735C56697375616C2053747564696F20323031355C50726F6A656374735C486965726172636879434C525C486965726172636879434C525C476574416C6C416E636573746F72732E63730000633A5C75736572735C62656E2E7468756C5C646F63756D656E74735C76697375616C2073747564696F20323031355C70726F6A656374735C686965726172636879636C725C686965726172636879636C725C676574616C6C616E636573746F72732E63730004000000660000000000000001000000670000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001BE230018000000063B3B6FEAFD4D1010B0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000200000001000000020000000000000067000000280000001BE230015D7260D8580000000100000066000000670000006500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000032002A11000000004801000000000000770000000000000000000000070000060000000001000000004D6F76654E6578740000001600031104000000140100007700000000000000010000000A0024115553797374656D00160024115553797374656D2E436F6C6C656374696F6E73001E002411554D6963726F736F66742E53716C5365727665722E536572766572001E002411554D6963726F736F66742E53716C5365727665722E547970657300001E002011000000000300001100000000000004004353243124303030300000001E002011010000000300001100000000000004004353243424303030310000001E00201102000000030000110000000000000400435324342430303032000000020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040000000C000000010004000200060042002A1100000000C0010000000000000200000000000000000000000A00000677000000010000000053797374656D2E49446973706F7361626C652E446973706F7365002E000404C93FEAC6B359D649BC250902BBABB460000000004D00440032000000040100000401D8000C0000000700000602000600F2000000A8000000000000000100010077000000000000000C0000009C00000000000000EEEFFE80240000000D00008025000000EEEFFE80270000000F000080280000001000008039000000EEEFFE804B000000110000805D000000120000805E0000000E0000806D000000EEEFFE80700000001300008071000000EEEFFE8000000000050006000000000009000A000D001E00000000000D00220009000A0009001A00000000000500060000000000F20000002400000077000000010001000200000000000000010000001800000001000000EEEFFE8000000000F4000000080000000100000000000000100000000000000018000000300000005C000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000036002A11000000009000000000000000150000000000000000000000010000067900000001000000004C697374416E636573746F7273000052000404C93FEAC6B359D649BC250902BBABB460000000004D004400320000000401000004040000300000003C004C0069007300740041006E0063006500730074006F00720073003E0064005F005F0030000000020006003E002A110000000004010000000000000E0000000000000000000000020000068E000000010000000046696C6C526F775F4C697374416E636573746F727300002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040172000C000000070000060200060036002A1100000000F4010000000000005F0000000000000000000000030000069C0000000100000000436F6D6D6F6E416E636573746F72001600031108010000C00100005F0000009C000000010000001E002011010000000600001100000000000004004353243124303030300000001E00201102000000060000110000000000000400435324342430303031000000260020110000000006000011000000000000000052657475726E526F6F744F6E4E756C6C00000000020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040172010C0000000700000602000600F20000003C0000008E000000010001000E000000000000000300000030000000000000001500008001000000160000800D00000017000080050006000900280005000600F20000009C0000009C000000010001005F000000000000000B00000090000000000000001B000080010000002100008003000000EEEFFE8005000000230000800F0000002200008022000000EEEFFE8025000000250000804F000000EEEFFE80520000002600008059000000270000805D000000280000800500060009002700000000000D002400090027000000000009004100000000000D0026000900130005000600F4000000080000000100000000000000180000007400000090000000A8000000CC000000E40000000401000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFF1A092FF1500000002C020000CD00000001000000050100000100000091000000010000005D000000010000001900000001000000A900000001000000E500000001000000010000000100000031000000010000007500000001000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000040000000000000000000000000000000000000000002000000000000000100000000000000000000000000000000000C0000001800000024000000300000003C0000004800000054000000600000006C00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000016002511000000000400000001004D6F76654E65787400001600291100000000040000000100303630303030303700002A002511000000004C010000010053797374656D2E49446973706F7361626C652E446973706F73650000000016002911000000004C0100000100303630303030306100001A002511000000000400000002004C697374416E636573746F727300160029110000000004000000020030363030303030310000220025110000000094000000020046696C6C526F775F4C697374416E636573746F7273001600291100000000940000000200303630303030303200001E00251100000000080100000200436F6D6D6F6E416E636573746F720000000016002911000000000801000002003036303030303033000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000FFFFFFFF1A092FF10000000000000000303700002A002511000000004C010000010053797374656D2E49446973706F7361626C652E446973706F73650000000016002911000000004C0100000100303630303030306100001A002511000000000400000002004C697374416E636573746F727300160029110000000004000000020030363030303030310000220025110000000094000000020046696C6C526F775F4C697374416E636573746F7273001600291100000000940000000200303630303030303200001E00251100000000080100000200436F6D6D6F6E416E636573746F7200000000160029110000000008010000020030363030303030330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFF770931010B0000000B00008E0C000E040D000000D4000000900000002C0000007C000000000000000000000016000000190000000000EEC00000000000000000FFFF000000000000FFFFFFFF00000000FFFF0000000000000000000000000900C401000000000000EC00000001000000B0BBEE00000000000000000055736572446566696E656446756E6374696F6E732E3C4C697374416E636573746F72733E645F5F3000434333443641463400000000000000FFFF000000000000FFFFFFFF00000000FFFF0000000000000000000000000A00F801000000000000F800000001000000F0BAEE00000000000000000055736572446566696E656446756E6374696F6E730037314141414545380000002DBA2EF1010000000000000077000000000000000000000000000000000000000100000077000000020000000000000000000000000000000000000001000000790000001500000000000000010000000000000000000000010000008E0000000E00000000000000010000000000000000000000010000009C0000005F00000000000000010000000000000000000000020002000D01000000000100FFFFFFFF00000000FB0000000802000000000000FFFFFFFF00000000FFFFFFFF0200020000000100010001000000000000000000633A5C55736572735C62656E2E7468756C5C446F63756D656E74735C56697375616C2053747564696F20323031355C50726F6A656374735C486965726172636879434C525C486965726172636879434C525C476574416C6C416E636573746F72732E637300000000FEEFFEEF010000000100000000010000000000000000000000FFFFFFFFFFFFFFFFFFFF1800FFFFFFFFFFFFFFFFFFFF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009000000AC000000EE00000038000000FFFFFFFF3800000000000000F00000008000000058000000050000000300000006000000070000000A000000090000000400000072632F66696C65732F633A5C75736572735C62656E2E7468756C5C646F63756D656E74735C76697375616C2073747564696F20323031355C70726F6A656374735C686965726172636879636C725C686965726172636879636C725C676574616C6C616E636573746F72732E6373000400000006000000010000003A0000000000000011000000070000000A000000060000000000000005000000220000000800000000000000DC513301000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001600000020000000EE000000380000007B0200003800000000000000F0000000800000005800000028000000C4020000B40200008C0200002C0000001C0100000300000016000000060000001400000015000000070000000A0000000B00000008000000090000000C0000000D0000000E0000000F0000001000000011000000130000001200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000942E3101854D6B570B00000007365C78E37EB64184B90887864B7BC4920000002F4C696E6B496E666F002F6E616D6573002F7372632F686561646572626C6F636B002F7372632F66696C65732F633A5C75736572735C62656E2E7468756C5C646F63756D656E74735C76697375616C2073747564696F20323031355C70726F6A656374735C686965726172636879636C725C686965726172636879636C725C676574616C6C616E636573746F72732E6373000400000006000000010000003A0000000000000011000000070000000A000000060000000000000005000000220000000800000000000000DC513301000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001900000044000000EE000000380000007B0200003800000000000000F00000008000000058000000C40200000C0300008C0200002C0000001C010000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF280000001600000018000000060000001400000015000000070000000A0000000B000000050000000C0000000D0000000E0000000F00000010000000110000001300000012000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 AS N'HierarchyCLR.pdb';


GO
PRINT N'Creating [clr].[CommonAncestor]...';


GO
CREATE FUNCTION [clr].[CommonAncestor]
(@h1 [sys].[hierarchyid], @h2 [sys].[hierarchyid])
RETURNS [sys].[hierarchyid]
AS
 EXTERNAL NAME [HierarchyCLR].[UserDefinedFunctions].[CommonAncestor]


GO
PRINT N'Creating [clr].[ListAncestors]...';


GO
CREATE FUNCTION [clr].[ListAncestors]
(@h [sys].[hierarchyid])
RETURNS 
     TABLE (
        [ancestor] [sys].[hierarchyid] NULL)
AS
 EXTERNAL NAME [HierarchyCLR].[UserDefinedFunctions].[ListAncestors]


GO
PRINT N'Update complete.';
GO

set statistics time on;
go
declare @a hierarchyid = '/1/1/2/6/', @b hierarchyid = '/1/2/3/';
select clr.CommonAncestor(@a, @b).ToString();

select ancestor.ToString()
from clr.ListAncestors('/1/1/2/5/');